(this["webpackJsonpantd-demo"]=this["webpackJsonpantd-demo"]||[]).push([[5],{122:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var a=n(23),r=n(0),o=n.n(r),c=n(7),l=function(e){e.name,e.link;var t=e.requireLogin,n=void 0!==t&&t,r=e.requireAdmin,l=void 0!==r&&r,u=e.hidden,i=void 0!==u&&u,s=e.children;Object(a.a)(e,["name","link","requireLogin","requireAdmin","hidden","children"]);return o.a.createElement(c.a.Consumer,null,(function(e){var t=e.userInfo;return t?l&&!t.isAdmin||i?o.a.createElement(o.a.Fragment,null):o.a.createElement(o.a.Fragment,null,s):n||l?o.a.createElement(o.a.Fragment,null):o.a.createElement(o.a.Fragment,null,s)}))}},132:function(e,t,n){e.exports=n(212)},137:function(e,t,n){},211:function(e,t,n){},212:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(3),c=n.n(o),l=(n(137),n(7)),u=n(41),i=n(42),s=n(43),d=n(48),m=n(214),f=n(215),p=n(59),g=n(122),h=n(99),E=m.a.Header,v=m.a.Content,b=m.a.Footer,k=[{name:"Home",link:"/"},{name:"Alternaors",link:"/alternators"},{name:"Spare Parts",link:"/spare"},{name:"Login",link:"/login",hidden:!0},{name:"Logout",link:"/logout",requireLogin:!0}],O=function(e){Object(s.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(u.a)(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).onMenuItemClick=function(t){var n=t.key;"/logout"===n?(0,e.props.logOut)():e.props.history.push(n)},e}return Object(i.a)(n,[{key:"render",value:function(){var e=this.props,t=e.children,n=e.location;return r.a.createElement(m.a,null,r.a.createElement(E,{style:{position:"fixed",zIndex:3,width:"100%"}},r.a.createElement("div",{className:"logo"}),r.a.createElement(f.a,{theme:"dark",mode:"horizontal",defaultSelectedKeys:[n.pathname],onClick:this.onMenuItemClick},k.map((function(e){return r.a.createElement(f.a.Item,{key:e.link},r.a.createElement(g.a,e,e.name))})))),r.a.createElement(v,{className:"site-layout",style:{padding:"0 50px",marginTop:64}},r.a.createElement("div",{className:"site-layout-background",style:{padding:24}},t)),r.a.createElement(b,{style:{textAlign:"center"}},"Ant Design \xa92018 Created by Ant UED"))}}]),n}(r.a.Component),_=Object(p.e)(Object(h.a)(l.a)(O)),A=(n(211),n(23)),y=Object(p.e)((function(e){var t=e.component,n=(e.location,Object(A.a)(e,["component","location"]));return r.a.createElement(l.a.Consumer,null,(function(e){var a=e.userInfo;return r.a.createElement(p.b,Object.assign({},n,{render:function(e){return a?r.a.createElement(t,e):r.a.createElement(p.a,{to:{pathname:"/login",state:{from:e.location.pathname}}})}}))}))})),j=Object(a.lazy)((function(){return Promise.all([n.e(0),n.e(1),n.e(2),n.e(4),n.e(14)]).then(n.bind(null,447))})),C=Object(a.lazy)((function(){return Promise.all([n.e(0),n.e(3),n.e(9),n.e(13)]).then(n.bind(null,448))})),S=Object(a.lazy)((function(){return Promise.all([n.e(1),n.e(4),n.e(3),n.e(10),n.e(12)]).then(n.bind(null,449))})),I=Object(a.lazy)((function(){return Promise.all([n.e(0),n.e(1),n.e(2),n.e(8),n.e(11)]).then(n.bind(null,446))})),P=function(){return r.a.createElement("p",null,"Loading")},T=function(){return r.a.createElement(p.d,null,r.a.createElement(p.b,{exact:!0,path:"/",render:function(e){return r.a.createElement(a.Suspense,{fallback:P()},r.a.createElement(C,e))}}),r.a.createElement(p.b,{exact:!0,path:"/login",render:function(e){return r.a.createElement(a.Suspense,{fallback:P()},r.a.createElement(j,e))}}),r.a.createElement(p.b,{exact:!0,path:"/alternators",render:function(e){return r.a.createElement(a.Suspense,{fallback:P()},r.a.createElement(S,e))}}),r.a.createElement(y,{exact:!0,path:"/alternators/add",render:function(e){return r.a.createElement(a.Suspense,{fallback:P()},r.a.createElement(I,e))}}),r.a.createElement(p.a,{to:"/"}))},L=function(){return r.a.createElement(l.b,null,r.a.createElement(_,null,r.a.createElement(T,null)))},R=n(10);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var w=Object(R.a)();c.a.render(r.a.createElement(p.c,{history:w},console.log(":Dadad"),r.a.createElement(L,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},63:function(e,t,n){"use strict";n.d(t,"c",(function(){return r})),n.d(t,"d",(function(){return o})),n.d(t,"e",(function(){return c})),n.d(t,"b",(function(){return l})),n.d(t,"a",(function(){return u}));var a=Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,REACT_APP_CLOUDINARY_URL:"https://api.cloudinary.com/v1_1/mhtdang/image",REACT_APP_SERVICE_URL:"http://localhost:3000",REACT_APP_CLOUDINARY_UPLOAD_PRESET:"kgawb0zn"}),r=Object.freeze({url:"".concat(a.REACT_APP_SERVICE_URL,"/api/"),cloudinaryUrl:a.REACT_APP_CLOUDINARY_URL,cloudinaryuploadPreset:a.REACT_APP_CLOUDINARY_UPLOAD_PRESET}),o=["https://res.cloudinary.com/mhtdang/image/upload/v1587655768/grover/ALT_START3_lnkt6a.jpg","https://res.cloudinary.com/mhtdang/image/upload/v1587655768/grover/ALT_MID32_owefp2.jpg","https://res.cloudinary.com/mhtdang/image/upload/v1587655767/grover/ALT_FIN33_xgx10s.jpg"],c={login:"".concat(r.url,"user/login"),verify:"".concat(r.url,"user/verify")},l={list:"".concat(r.url,"alternator/list"),add:"".concat(r.url,"alternator/add"),update:"".concat(r.url,"alternator/update/"),delete:"".concat(r.url,"alternator/")},u="https://res.cloudinary.com/mhtdang/image/upload/v1587655767/grover/Alternator_Cut_Away_EDIT_lr2_pdmw2k.jpg"},7:function(e,t,n){"use strict";n.d(t,"b",(function(){return h})),n.d(t,"a",(function(){return g}));var a=n(20),r=n.n(a),o=n(44),c=n(41),l=n(42),u=n(43),i=n(48),s=n(0),d=n.n(s),m=n(66),f=n.n(m),p=n(63),g=d.a.createContext({}),h=function(e){Object(u.a)(n,e);var t=Object(i.a)(n);function n(e){var a;return Object(c.a)(this,n),(a=t.call(this,e)).login=function(){var e=Object(o.a)(r.a.mark((function e(t){var n,o,c,l;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,f.a.post(p.e.login,t);case 3:n=e.sent,o=n.data,c=o.token,l=o.userInfo,localStorage.setItem("user-token",c),a.setState({userInfo:l}),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),"Request failed with status code 401"===e.t0.message&&a.clearSession();case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t){return e.apply(this,arguments)}}(),a.clearSession=function(){localStorage.removeItem("user-token"),a.setState({userInfo:void 0})},a.getUserToken=function(){return localStorage.getItem("user-token")||""},a.validateLogin=Object(o.a)(r.a.mark((function e(){var t,n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!a.getUserToken()){e.next=8;break}return e.next=4,f.a.get(p.e.verify,a.getAuthHeader());case 4:t=e.sent,n=t.data,console.log(":::::",n),a.setState({userInfo:n});case 8:e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),"Request failed with status code 401"===e.t0.message&&a.clearSession();case 13:case"end":return e.stop()}}),e,null,[[0,10]])}))),a.getAuthHeader=function(){return{headers:{Authorization:"Bearer "+a.getUserToken()}}},a.logOut=Object(o.a)(r.a.mark((function e(){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{a.clearSession()}catch(t){}case 1:case"end":return e.stop()}}),e)}))),a.state={userInfo:void 0},a}return Object(l.a)(n,[{key:"componentDidMount",value:function(){this.validateLogin()}},{key:"render",value:function(){var e=this.props.children,t=this.login,n=this.logOut,a=this.getAuthHeader,r=this.state.userInfo;return d.a.createElement(g.Provider,{value:{login:t,logOut:n,getAuthHeader:a,userInfo:r}},e)}}]),n}(s.Component)},99:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var a=n(0),r=n.n(a),o=function(e){return function(t){return function(n){return r.a.createElement(e.Consumer,null,(function(e){return r.a.createElement(t,Object.assign({},n,e))}))}}}}},[[132,6,7]]]);
//# sourceMappingURL=main.889b5bcc.chunk.js.map